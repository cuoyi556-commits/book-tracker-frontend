<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯»ä¹¦è®°å½•ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Long+Cang&Liu+Jian+Mao+Cao&Ma+Shan+Zheng&Noto+Sans+SC:wght@300;400;500;700&Noto+Serif+SC:wght@300;400;500;700&ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>

        * {
            font-family: 'Noto Sans SC', sans-serif;
        }

        /* é¢„è§ˆåŒºåŸŸæ ·å¼ - 3:4æ¯”ä¾‹ */
        #preview-container {
            width: 900px;
            height: 1200px;
            position: relative;
            overflow: hidden;
            transition: background 0.3s ease;
        }

        /* èƒŒæ™¯ä¸»é¢˜æ ·å¼ */
        .theme-dark {
            background: linear-gradient(180deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
        }

        .theme-warm {
            background: linear-gradient(180deg, #f5e6d3 0%, #fff8f0 50%, #f5e6d3 100%);
        }

        .theme-cool {
            background: linear-gradient(180deg, #e0f2fe 0%, #f0f9ff 50%, #e0f2fe 100%);
        }

        .theme-forest {
            background: linear-gradient(180deg, #1a2f1a 0%, #2d4a2d 50%, #1a2f1a 100%);
        }

        .theme-sunset {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        }

        .theme-minimal {
            background: linear-gradient(180deg, #fafafa 0%, #ffffff 50%, #fafafa 100%);
        }

        .theme-vintage {
            background: linear-gradient(180deg, #d4c5b0 0%, #e8dcc8 50%, #d4c5b0 100%);
        }

        .theme-ocean {
            background: linear-gradient(180deg, #0c2340 0%, #1da2d8 30%, #0c2340 100%);
        }

        /* è‡ªå®šä¹‰èƒŒæ™¯ä¸»é¢˜ */
        .theme-custom {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* è‡ªå®šä¹‰èƒŒæ™¯æ—¶çš„æ–‡å­—æ ·å¼ï¼ˆé»˜è®¤æ·±è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼‰ */
        .theme-custom .month-label {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: rgba(255, 255, 255, 0.95);
        }

        .theme-custom .month-row {
            border-bottom: 1px dashed rgba(255, 255, 255, 0.4);
        }

        .theme-custom #mainTitle,
        .theme-custom #subTitle {
            color: rgba(255, 255, 255, 0.85);
        }

        .theme-custom #subTitle {
            color: rgba(255, 255, 255, 0.6);
        }

        /* ä¸»é¢˜å¯¹åº”çš„æ–‡å­—é¢œè‰² */
        .theme-dark .month-label,
        .theme-forest .month-label,
        .theme-sunset .month-label,
        .theme-ocean .month-label {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: rgba(255, 255, 255, 0.95);
        }

        .theme-warm .month-label,
        .theme-cool .month-label,
        .theme-minimal .month-label,
        .theme-vintage .month-label {
            background: rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.15);
            color: rgba(0, 0, 0, 0.75);
        }

        .theme-dark .month-row,
        .theme-forest .month-row,
        .theme-sunset .month-row,
        .theme-ocean .month-row {
            border-bottom: 1px dashed rgba(255, 255, 255, 0.4);
        }

        .theme-warm .month-row,
        .theme-cool .month-row,
        .theme-minimal .month-row,
        .theme-vintage .month-row {
            border-bottom: 1px dashed rgba(0, 0, 0, 0.2);
        }

        .theme-dark #mainTitle,
        .theme-dark #subTitle,
        .theme-forest #mainTitle,
        .theme-forest #subTitle,
        .theme-sunset #mainTitle,
        .theme-sunset #subTitle,
        .theme-ocean #mainTitle,
        .theme-ocean #subTitle {
            color: rgba(255, 255, 255, 0.85);
        }

        .theme-dark #subTitle,
        .theme-forest #subTitle,
        .theme-sunset #subTitle,
        .theme-ocean #subTitle {
            color: rgba(255, 255, 255, 0.6);
        }

        .theme-warm #mainTitle,
        .theme-cool #mainTitle,
        .theme-minimal #mainTitle,
        .theme-vintage #mainTitle {
            color: rgba(0, 0, 0, 0.85);
        }

        .theme-warm #subTitle,
        .theme-cool #subTitle,
        .theme-minimal #subTitle,
        .theme-vintage #subTitle {
            color: rgba(0, 0, 0, 0.6);
        }

        /* æ ‡é¢˜åŒºåŸŸè£…é¥° */
        .title-decoration {
            display: none;
        }

        /* æœˆä»½å¸ƒå±€ - 12è¡Œï¼Œæ¯è¡Œé«˜åº¦å›ºå®š */
        .months-grid {
            padding: 15px 25px;
            height: 950px;
            display: flex;
            flex-direction: column;
        }

        .month-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-height: 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.4);
            padding-bottom: 8px;
            margin-bottom: 8px;
        }

        .month-row:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .month-label {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 8px;
            font-size: 16px;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.95);
            flex-shrink: 0;
            text-transform: uppercase;
            font-family: 'Long Cang', cursive;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .books-container {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            flex: 1;
            align-items: center;
        }

        /* åº•éƒ¨è£…é¥° */
        .footer-decoration {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.3);
            letter-spacing: 4px;
        }

        .book-cover {
            width: 80px;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: transform 0.2s;
        }

        .books-container {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            flex: 1;
        }

        /* æ·»åŠ ä¹¦ç±çš„å ä½æ¡† - è‡ªé€‚åº”è¡Œé«˜ */
        .add-book-slot {
            height: calc((950px - 12 * 10px) / 12);
            aspect-ratio: 2/3;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.05);
        }

        .add-book-slot:hover {
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.1);
        }

        .add-book-slot .plus-icon {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.3);
        }

        .add-book-slot:hover .plus-icon {
            color: rgba(255, 255, 255, 0.6);
        }

        /* å·²æ·»åŠ çš„ä¹¦ç± - è‡ªé€‚åº”è¡Œé«˜ */
        .added-book {
            position: relative;
            height: calc((950px - 12 * 10px) / 12);
        }

        .added-book img {
            height: 100%;
            width: auto;
            aspect-ratio: 2/3;
            object-fit: cover;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .added-book .remove-icon {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 18px;
            height: 18px;
            background: #e07a5f;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            line-height: 1;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .added-book:hover .remove-icon {
            opacity: 1;
        }

        /* åŠ è½½ä¸­åŠ¨ç”» */
        .loading-slot {
            height: calc((950px - 12 * 10px) / 12);
            aspect-ratio: 2/3;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å¼¹çª—æ ·å¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        /* Toasté€šçŸ¥ */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 9999;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success { background: #10b981; }
        .toast.error { background: #ef4444; }
        .toast.info { background: #3b82f6; }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        /* ä¾§è¾¹æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            right: 20px;
            top: 140px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            width: 280px;
            max-height: calc(90vh - 120px);
            overflow-y: auto;
        }

        .control-section {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e7eb;
        }

        .control-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        /* é¡µé¢æ ‡é¢˜æ ·å¼ */
        .page-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1.5rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .page-title {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: 0.1em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .page-title::before {
            content: 'ğŸ“š';
            margin-right: 0.3em;
            font-size: 2.2rem;
        }

        .page-title::after {
            content: 'ğŸ“–';
            margin-left: 0.3em;
            font-size: 2.2rem;
        }

        .page-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            margin-top: 0.5rem;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        /* è°ƒæ•´ä¸»å†…å®¹åŒºåŸŸçš„ä¸Šè¾¹è· */
        .main-content {
            margin-top: 120px;
        }

        /* å·¦ä¾§ä½¿ç”¨è¯´æ˜é¢æ¿ */
        .help-panel {
            position: fixed;
            left: 20px;
            top: 140px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            width: 260px;
            max-height: calc(90vh - 120px);
            overflow-y: auto;
            font-size: 13px;
        }

        .help-panel h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #374151;
        }

        .help-section {
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .help-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .help-section h4 {
            font-size: 13px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 8px;
        }

        .help-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .help-section li {
            color: #6b7280;
            margin-bottom: 6px;
            line-height: 1.5;
        }

        .help-section li:before {
            content: "â€¢ ";
            color: #9ca3af;
        }

        .tip {
            background: #fef3c7;
            border-left: 3px solid #f59e0b;
            padding: 8px 10px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 12px;
            color: #92400e;
        }

        /* ==================== ç§»åŠ¨ç«¯é€‚é… ==================== */
        @media (max-width: 767px) {
            /* éšè—å·¦ä¾§ä½¿ç”¨è¯´æ˜é¢æ¿ */
            .help-panel {
                display: none;
            }

            /* è°ƒæ•´é¡µé¢æ ‡é¢˜ */
            .page-header {
                padding: 1rem 0;
            }

            .page-title {
                font-size: 1.5rem;
            }

            .page-title::before,
            .page-title::after {
                font-size: 1.3rem;
            }

            .page-subtitle {
                font-size: 0.85rem;
            }

            /* è°ƒæ•´ä¸»å†…å®¹åŒºåŸŸ */
            .main-content {
                margin-top: 80px;
                padding: 0.5rem;
            }

            /* é¢„è§ˆåŒºåŸŸ - è‡ªé€‚åº”é«˜åº¦ï¼Œå®Œæ•´æ˜¾ç¤º */
            #preview-container {
                width: 100% !important;
                height: auto !important;
                min-height: 600px; /* ç¡®ä¿æœ‰è¶³å¤Ÿé«˜åº¦æ˜¾ç¤ºæ‰€æœ‰å†…å®¹ */
                display: block !important;
            }

            /* ç¼©å°æ ‡é¢˜å­—ä½“ */
            #mainTitle {
                font-size: 1.5rem !important;
                min-width: 150px !important;
            }

            #subTitle {
                font-size: 1rem !important;
                min-width: 100px !important;
            }

            /* è°ƒæ•´æœˆä»½ç½‘æ ¼ */
            .months-grid {
                padding: 10px 15px !important;
                height: auto !important;
                min-height: 450px; /* å¢åŠ é«˜åº¦ç¡®ä¿æ˜¾ç¤ºæ‰€æœ‰æœˆä»½ */
            }

            .month-row {
                margin-bottom: 6px;
                padding-bottom: 6px;
            }

            /* ç¼©å°æœˆä»½æ ‡ç­¾ */
            .month-label {
                width: 36px !important;
                height: 36px !important;
                font-size: 12px !important;
                letter-spacing: 1px !important;
            }

            /* ç¼©å°ä¹¦ç±å°é¢ */
            .added-book img {
                max-height: 60px !important;
            }

            .add-book-slot {
                max-height: 60px !important;
            }

            .add-book-slot .plus-icon {
                font-size: 18px !important;
            }

            /* éšè—æ¡Œé¢ç‰ˆå³ä¾§æ§åˆ¶é¢æ¿ */
            .control-panel {
                display: none;
            }

            /* åˆ›å»ºç§»åŠ¨ç«¯åº•éƒ¨æ§åˆ¶æ  */
            .mobile-controls {
                display: flex !important;
            }

            /* è°ƒæ•´åº•éƒ¨è£…é¥° */
            .footer-decoration {
                font-size: 10px !important;
                bottom: 10px !important;
            }

            /* è°ƒæ•´å¼¹çª— */
            .modal-content {
                width: 95% !important;
                max-width: none !important;
                margin: 10px;
                padding: 20px !important;
            }

            /* è°ƒæ•´ Toast ä½ç½® */
            .toast {
                top: 10px !important;
                right: 10px !important;
                left: 10px !important;
                max-width: none !important;
            }

            /* ç§»åŠ¨ç«¯æ§åˆ¶é¢æ¿æŠ½å±‰ - æ”¹ä¸ºå³ä¸Šè§’æ‚¬æµ®æŒ‰é’® */
            .mobile-drawer {
                display: block;
                position: fixed;
                top: 90px;
                right: 10px;
                background: white;
                border-radius: 16px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.15);
                z-index: 1000;
                width: 280px;
                max-height: 70vh;
                overflow-y: auto;
            }

            .mobile-drawer.collapsed {
                width: 50px;
                overflow: hidden;
            }

            .mobile-drawer-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 15px 20px;
                cursor: pointer;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-top-left-radius: 16px;
                border-top-right-radius: 16px;
            }

            .mobile-drawer.collapsed .mobile-drawer-header {
                justify-content: center;
                padding: 15px 10px;
            }

            .mobile-drawer-header h3 {
                font-size: 16px;
                font-weight: 600;
                color: white;
                margin: 0;
            }

            .mobile-drawer.collapsed .mobile-drawer-header h3 {
                display: none;
            }

            .mobile-drawer-toggle {
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(255,255,255,0.2);
                border-radius: 12px;
                font-size: 20px;
                color: white;
                transition: all 0.3s;
            }

            .mobile-drawer.collapsed .mobile-drawer-toggle {
                background: rgba(255,255,255,0.4);
                width: 30px;
                height: 30px;
                font-size: 16px;
            }

            .mobile-drawer-content {
                padding: 20px;
            }

            .mobile-drawer.collapsed .mobile-drawer-content {
                display: none;
            }

            /* ç§»åŠ¨ç«¯æ§åˆ¶åŒºåŸŸæ ·å¼ */
            .mobile-control-section {
                margin-bottom: 24px;
                padding-bottom: 20px;
                border-bottom: 1px solid #e5e7eb;
            }

            .mobile-control-section:last-child {
                border-bottom: none;
                margin-bottom: 0;
                padding-bottom: 0;
            }

            .mobile-control-section h4 {
                font-size: 14px;
                font-weight: 600;
                color: #374151;
                margin-bottom: 12px;
            }

            .mobile-control-section label {
                font-size: 13px;
                color: #6b7280;
                display: block;
                margin-bottom: 6px;
            }

            .mobile-control-section select,
            .mobile-control-section input[type="color"] {
                width: 100%;
                padding: 10px;
                border: 1px solid #d1d5db;
                border-radius: 8px;
                font-size: 14px;
                margin-bottom: 12px;
                background: white;
            }

            .mobile-control-section input[type="color"] {
                height: 44px;
                padding: 4px;
                cursor: pointer;
            }

            .mobile-btn {
                width: 100%;
                padding: 12px 20px;
                border: none;
                border-radius: 8px;
                font-size: 15px;
                font-weight: 500;
                cursor: pointer;
                margin-bottom: 10px;
                transition: all 0.2s;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }

            .mobile-btn:last-child {
                margin-bottom: 0;
            }

            .mobile-btn-primary {
                background: #3b82f6;
                color: white;
            }

            .mobile-btn-success {
                background: #10b981;
                color: white;
            }

            .mobile-btn-secondary {
                background: #6b7280;
                color: white;
            }

            .mobile-btn-outline {
                background: white;
                color: #374151;
                border: 1px solid #d1d5db;
            }

            .mobile-color-row {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 12px;
            }

            .mobile-color-row label {
                margin-bottom: 0;
                flex: 1;
            }

            .mobile-color-row input[type="color"] {
                width: 50px;
                margin-bottom: 0;
            }

            .mobile-reset-btn {
                padding: 8px 16px;
                background: #f3f4f6;
                border: none;
                border-radius: 6px;
                font-size: 13px;
                color: #6b7280;
                cursor: pointer;
            }

            /* ç§»åŠ¨ç«¯å¸®åŠ©æŒ‰é’® */
            .mobile-help-btn {
                display: block !important;
                position: fixed;
                top: 150px;
                left: 10px;
                width: 44px;
                height: 44px;
                background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
                border-radius: 50%;
                box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
                z-index: 999;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 22px;
                cursor: pointer;
                color: white;
                font-weight: bold;
                border: 2px solid white;
            }

            /* ç§»åŠ¨ç«¯å¸®åŠ©å¼¹çª— */
            .mobile-help-modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 9999;
                padding: 20px;
                overflow-y: auto;
            }

            .mobile-help-modal.active {
                display: block;
            }

            .mobile-help-content {
                background: white;
                border-radius: 16px;
                padding: 24px;
                max-width: 400px;
                margin: 40px auto;
                box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            }

            .mobile-help-content h3 {
                font-size: 18px;
                font-weight: 600;
                margin-bottom: 16px;
                color: #374151;
            }

            .mobile-help-section {
                margin-bottom: 20px;
                padding-bottom: 16px;
                border-bottom: 1px solid #e5e7eb;
            }

            .mobile-help-section:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }

            .mobile-help-section h4 {
                font-size: 15px;
                font-weight: 600;
                color: #4b5563;
                margin-bottom: 10px;
            }

            .mobile-help-section ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .mobile-help-section li {
                color: #6b7280;
                margin-bottom: 8px;
                line-height: 1.6;
                font-size: 14px;
            }

            .mobile-help-section li:before {
                content: "â€¢ ";
                color: #9ca3af;
            }

            .mobile-tip {
                background: #fef3c7;
                border-left: 3px solid #f59e0b;
                padding: 10px 12px;
                margin-top: 10px;
                border-radius: 4px;
                font-size: 13px;
                color: #92400e;
            }

            .mobile-help-close {
                width: 100%;
                padding: 12px 20px;
                background: #3b82f6;
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 15px;
                font-weight: 500;
                cursor: pointer;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
        <h1 class="page-title">é˜…è¯»è®°å½•ç”Ÿæˆå™¨</h1>
        <p class="page-subtitle">è®°å½•ä½ çš„é˜…è¯»è¶³è¿¹ï¼Œåˆ†äº«è¯»ä¹¦çš„å¿«ä¹</p>
    </div>

    <!-- å·¦ä¾§ä½¿ç”¨è¯´æ˜ -->
    <div class="help-panel">
        <h3>ğŸ“– ä½¿ç”¨æŒ‡å—</h3>

        <div class="help-section">
            <h4>æ·»åŠ ä¹¦ç±</h4>
            <ul>
                <li>ç‚¹å‡»æœˆä»½å³ä¾§çš„ "+" æŒ‰é’®</li>
                <li>è¾“å…¥ä¹¦åæˆ–ISBNï¼ŒæŒ‰å›è½¦æœç´¢</li>
                <li>æ”¯æŒè±†ç“£å›¾ä¹¦è‡ªåŠ¨æœç´¢</li>
                <li>ä¹Ÿå¯åˆ‡æ¢åˆ°"æœ¬åœ°ä¸Šä¼ "ä¸Šä¼ å°é¢</li>
            </ul>
        </div>

        <div class="help-section">
            <h4>ç¼–è¾‘æ ‡é¢˜</h4>
            <ul>
                <li>ç›´æ¥ç‚¹å‡»ä¸»/å‰¯æ ‡é¢˜ä½ç½®</li>
                <li>è¾“å…¥å®Œæˆåè‡ªåŠ¨ä¿å­˜</li>
            </ul>
        </div>

        <div class="help-section">
            <h4>è‡ªå®šä¹‰æ ·å¼</h4>
            <ul>
                <li>8ç§é¢„è®¾èƒŒæ™¯ä¸»é¢˜å¯é€‰</li>
                <li>æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡</li>
                <li>6ç§å­—ä½“å¯é€‰</li>
                <li>å­—ä½“é¢œè‰²å¯è‡ªç”±è°ƒæ•´</li>
            </ul>
            <div class="tip">ğŸ’¡ åˆ‡æ¢ä¸»é¢˜åè®°å¾—ä¿å­˜è¿›åº¦</div>
        </div>

        <div class="help-section">
            <h4>åˆ é™¤ä¹¦ç±</h4>
            <ul>
                <li>é¼ æ ‡æ‚¬åœåœ¨ä¹¦ç±å°é¢ä¸Š</li>
                <li>ç‚¹å‡»å³ä¸Šè§’çš„ "Ã—" åˆ é™¤</li>
            </ul>
        </div>

        <div class="help-section">
            <h4>å¯¼å‡ºå›¾ç‰‡</h4>
            <ul>
                <li>ç¼–è¾‘å®Œæˆåç‚¹å‡»"ç”Ÿæˆå›¾ç‰‡"</li>
                <li>å›¾ç‰‡è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°</li>
                <li>å»ºè®®å®šæœŸç‚¹å‡»"ä¿å­˜è¿›åº¦"</li>
            </ul>
            <div class="tip">ğŸ’¡ æ¯æœˆæœ€å¤šå¯æ·»åŠ 12æœ¬ä¹¦</div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="flex items-start justify-center min-h-screen py-8 px-4 main-content">
        <!-- é¢„è§ˆåŒºåŸŸ -->
        <div id="preview-container" class="shadow-2xl">
            <!-- è£…é¥°å¹´ä»½ -->
            <div class="title-decoration">2024</div>

            <!-- æ ‡é¢˜åŒºåŸŸ -->
            <div class="text-center pt-10 pb-6 px-8 relative z-10 flex items-baseline justify-center gap-2">
                <input type="text"
                    id="mainTitle"
                    placeholder="2025é˜…è¯»è®°å½•"
                    class="text-center text-4xl font-bold bg-transparent border-none outline-none placeholder-gray-500"
                    style="color: rgba(255, 255, 255, 0.85); width: auto; min-width: 200px;"
                    oninput="updateTitle()">
                <input type="text"
                    id="subTitle"
                    placeholder="ç•™ä¸‹ä½ çš„è¯»ä¹¦æ„Ÿæ‚Ÿå§"
                    class="text-lg bg-transparent border-none outline-none placeholder-gray-500"
                    style="color: rgba(255, 255, 255, 0.6); width: auto; min-width: 150px;"
                    oninput="updateSubtitle()">
            </div>

            <!-- æœˆä»½ç½‘æ ¼ -->
            <div class="px-6 pb-16">
                <div id="previewBooks" class="months-grid"></div>
            </div>

            <!-- åº•éƒ¨è£…é¥° -->
            <div class="footer-decoration">READING YEAR</div>
        </div>
    </div>

    <!-- ç§»åŠ¨ç«¯å¸®åŠ©æŒ‰é’® -->
    <div class="mobile-help-btn" onclick="toggleMobileHelp()">â“</div>

    <!-- ç§»åŠ¨ç«¯å¸®åŠ©å¼¹çª— -->
    <div id="mobileHelpModal" class="mobile-help-modal" onclick="closeMobileHelpOutside(event)">
        <div class="mobile-help-content">
            <h3>ğŸ“– ä½¿ç”¨æŒ‡å—</h3>

            <div class="mobile-help-section">
                <h4>æ·»åŠ ä¹¦ç±</h4>
                <ul>
                    <li>ç‚¹å‡»æœˆä»½å³ä¾§çš„ "+" æŒ‰é’®</li>
                    <li>è¾“å…¥ä¹¦åæˆ–ISBNï¼ŒæŒ‰å›è½¦æœç´¢</li>
                    <li>æ”¯æŒè±†ç“£å›¾ä¹¦è‡ªåŠ¨æœç´¢</li>
                    <li>ä¹Ÿå¯åˆ‡æ¢åˆ°"æœ¬åœ°ä¸Šä¼ "ä¸Šä¼ å°é¢</li>
                </ul>
            </div>

            <div class="mobile-help-section">
                <h4>ç¼–è¾‘æ ‡é¢˜</h4>
                <ul>
                    <li>ç›´æ¥ç‚¹å‡»ä¸»/å‰¯æ ‡é¢˜ä½ç½®</li>
                    <li>è¾“å…¥å®Œæˆåè‡ªåŠ¨ä¿å­˜</li>
                </ul>
            </div>

            <div class="mobile-help-section">
                <h4>è‡ªå®šä¹‰æ ·å¼</h4>
                <ul>
                    <li>8ç§é¢„è®¾èƒŒæ™¯ä¸»é¢˜å¯é€‰</li>
                    <li>æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡</li>
                    <li>6ç§å­—ä½“å¯é€‰</li>
                    <li>å­—ä½“é¢œè‰²å¯è‡ªç”±è°ƒæ•´</li>
                </ul>
                <div class="mobile-tip">ğŸ’¡ åˆ‡æ¢ä¸»é¢˜åè®°å¾—ä¿å­˜è¿›åº¦</div>
            </div>

            <div class="mobile-help-section">
                <h4>åˆ é™¤ä¹¦ç±</h4>
                <ul>
                    <li>ç‚¹å‡»ä¹¦ç±å°é¢</li>
                    <li>ç‚¹å‡»å³ä¸Šè§’çš„ "Ã—" åˆ é™¤</li>
                </ul>
            </div>

            <div class="mobile-help-section">
                <h4>å¯¼å‡ºå›¾ç‰‡</h4>
                <ul>
                    <li>ç¼–è¾‘å®Œæˆåç‚¹å‡»"ç”Ÿæˆå›¾ç‰‡"</li>
                    <li>å›¾ç‰‡è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°</li>
                    <li>å»ºè®®å®šæœŸç‚¹å‡»"ä¿å­˜è¿›åº¦"</li>
                </ul>
                <div class="mobile-tip">ğŸ’¡ æ¯æœˆæœ€å¤šå¯æ·»åŠ 12æœ¬ä¹¦</div>
            </div>

            <button class="mobile-help-close" onclick="toggleMobileHelp()">å…³é—­</button>
        </div>
    </div>

    <!-- ç§»åŠ¨ç«¯å³ä¸Šè§’æ§åˆ¶æŒ‰é’® -->
    <div id="mobileDrawer" class="mobile-drawer collapsed">
        <div class="mobile-drawer-header" onclick="toggleMobileDrawer()">
            <h3>âš™ï¸ æ“ä½œé¢æ¿</h3>
            <div class="mobile-drawer-toggle">âœ•</div>
        </div>
        <div class="mobile-drawer-content">
            <div class="mobile-control-section">
                <h4>èƒŒæ™¯ä¸»é¢˜</h4>
                <label>é€‰æ‹©ä¸»é¢˜</label>
                <select id="mobileThemeSelect" onchange="changeTheme()">
                    <option value="theme-dark">ğŸŒ‘ æš—å¤œé»‘</option>
                    <option value="theme-warm">ğŸŒ… æ¸©æš–ç±³</option>
                    <option value="theme-cool">â„ï¸ æ¸…å‡‰è“</option>
                    <option value="theme-forest">ğŸŒ² æ£®æ—ç»¿</option>
                    <option value="theme-sunset">ğŸŒ† æ—¥æš®ç´«</option>
                    <option value="theme-minimal">â¬œ æç®€ç™½</option>
                    <option value="theme-vintage">ğŸ“œ å¤å¤æ£•</option>
                    <option value="theme-ocean">ğŸŒŠ æ·±æµ·è“</option>
                    <option value="theme-custom">ğŸ–¼ï¸ è‡ªå®šä¹‰èƒŒæ™¯</option>
                </select>
                <button id="mobileUploadBgBtn" onclick="document.getElementById('customBgInput').click()" class="mobile-btn mobile-btn-outline hidden">
                    ğŸ“¤ ä¸Šä¼ èƒŒæ™¯å›¾ç‰‡
                </button>
            </div>

            <div class="mobile-control-section">
                <h4>å­—ä½“è®¾ç½®</h4>
                <label>ä¸»æ ‡é¢˜å­—ä½“</label>
                <select id="mobileTitleFont" onchange="changeFont('title')">
                    <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                    <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                    <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                    <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                    <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                    <option value="'Long Cang', cursive">é¾™è—ä½“</option>
                </select>
                <div class="mobile-color-row">
                    <label>é¢œè‰²</label>
                    <input type="color" id="mobileTitleColor" value="#ffffff" onchange="changeColor('title')">
                    <button class="mobile-reset-btn" onclick="resetColor('title')">é‡ç½®</button>
                </div>

                <label>å‰¯æ ‡é¢˜å­—ä½“</label>
                <select id="mobileSubFont" onchange="changeFont('sub')">
                    <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                    <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                    <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                    <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                    <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                    <option value="'Long Cang', cursive">é¾™è—ä½“</option>
                </select>
                <div class="mobile-color-row">
                    <label>é¢œè‰²</label>
                    <input type="color" id="mobileSubColor" value="#ffffff" onchange="changeColor('sub')">
                    <button class="mobile-reset-btn" onclick="resetColor('sub')">é‡ç½®</button>
                </div>

                <label>æœˆä»½æ ‡ç­¾å­—ä½“</label>
                <select id="mobileMonthFont" onchange="changeFont('month')">
                    <option value="'Long Cang', cursive">é¾™è—ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                    <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“</option>
                    <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                    <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                    <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                    <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                </select>
                <div class="mobile-color-row">
                    <label>é¢œè‰²</label>
                    <input type="color" id="mobileMonthColor" value="#ffffff" onchange="changeColor('month')">
                    <button class="mobile-reset-btn" onclick="resetColor('month')">é‡ç½®</button>
                </div>
            </div>

            <div class="mobile-control-section">
                <h4>æ“ä½œ</h4>
                <button onclick="saveProgress()" class="mobile-btn mobile-btn-secondary">ğŸ’¾ ä¿å­˜è¿›åº¦</button>
                <button onclick="clearAll()" class="mobile-btn mobile-btn-secondary">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰</button>
                <button onclick="generateImage()" class="mobile-btn mobile-btn-success">ğŸ“· ç”Ÿæˆå›¾ç‰‡</button>
            </div>
        </div>
    </div>

    <!-- ä¾§è¾¹æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <h2 class="text-lg font-semibold mb-4">âš™ï¸ æ“ä½œé¢æ¿</h2>

        <div class="control-section">
            <h3 class="text-sm font-medium text-gray-700 mb-2">èƒŒæ™¯ä¸»é¢˜</h3>
            <select id="themeSelect" onchange="changeTheme()" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm mb-2">
                <option value="theme-dark">ğŸŒ‘ æš—å¤œé»‘</option>
                <option value="theme-warm">ğŸŒ… æ¸©æš–ç±³</option>
                <option value="theme-cool">â„ï¸ æ¸…å‡‰è“</option>
                <option value="theme-forest">ğŸŒ² æ£®æ—ç»¿</option>
                <option value="theme-sunset">ğŸŒ† æ—¥æš®ç´«</option>
                <option value="theme-minimal">â¬œ æç®€ç™½</option>
                <option value="theme-vintage">ğŸ“œ å¤å¤æ£•</option>
                <option value="theme-ocean">ğŸŒŠ æ·±æµ·è“</option>
                <option value="theme-custom">ğŸ–¼ï¸ è‡ªå®šä¹‰èƒŒæ™¯</option>
            </select>
            <input type="file" id="customBgInput" accept="image/*" class="hidden" onchange="handleCustomBg(event)">
            <button id="uploadBgBtn" onclick="document.getElementById('customBgInput').click()" class="btn btn-secondary w-full text-sm py-1.5 hidden">
                ğŸ“¤ ä¸Šä¼ èƒŒæ™¯å›¾ç‰‡
            </button>
        </div>

        <div class="control-section">
            <h3 class="text-sm font-medium text-gray-700 mb-2">å­—ä½“è®¾ç½®</h3>
            <div class="space-y-2">
                <div>
                    <label class="text-xs text-gray-500">ä¸»æ ‡é¢˜å­—ä½“</label>
                    <select id="titleFont" onchange="changeFont('title')" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm mb-1">
                        <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                        <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                        <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                        <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                        <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                        <option value="'Long Cang', cursive">é¾™è—ä½“</option>
                    </select>
                    <div class="flex items-center gap-2">
                        <label class="text-xs text-gray-500">é¢œè‰²</label>
                        <input type="color" id="titleColor" value="#ffffff" onchange="changeColor('title')" class="w-8 h-8 border border-gray-300 rounded cursor-pointer">
                        <button onclick="resetColor('title')" class="text-xs text-gray-500 hover:text-gray-700">é‡ç½®</button>
                    </div>
                </div>
                <div>
                    <label class="text-xs text-gray-500">å‰¯æ ‡é¢˜å­—ä½“</label>
                    <select id="subFont" onchange="changeFont('sub')" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm mb-1">
                        <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                        <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                        <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                        <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                        <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                        <option value="'Long Cang', cursive">é¾™è—ä½“</option>
                    </select>
                    <div class="flex items-center gap-2">
                        <label class="text-xs text-gray-500">é¢œè‰²</label>
                        <input type="color" id="subColor" value="#ffffff" onchange="changeColor('sub')" class="w-8 h-8 border border-gray-300 rounded cursor-pointer">
                        <button onclick="resetColor('sub')" class="text-xs text-gray-500 hover:text-gray-700">é‡ç½®</button>
                    </div>
                </div>
                <div>
                    <label class="text-xs text-gray-500">æœˆä»½æ ‡ç­¾å­—ä½“</label>
                    <select id="monthFont" onchange="changeFont('month')" class="w-full px-2 py-1.5 border border-gray-300 rounded text-sm mb-1">
                        <option value="'Long Cang', cursive">é¾™è—ä½“ï¼ˆé»˜è®¤ï¼‰</option>
                        <option value="'Noto Sans SC', sans-serif">æ€æºé»‘ä½“</option>
                        <option value="'Noto Serif SC', serif">æ€æºå®‹ä½“</option>
                        <option value="'ZCOOL KuaiLe', cursive">ç«™é…·å¿«ä¹ä½“</option>
                        <option value="'Ma Shan Zheng', cursive">é©¬å–„æ”¿æ¯›ç¬”</option>
                        <option value="'Liu Jian Mao Cao', cursive">åˆ˜å»ºæ¯›ç¬”</option>
                    </select>
                    <div class="flex items-center gap-2">
                        <label class="text-xs text-gray-500">é¢œè‰²</label>
                        <input type="color" id="monthColor" value="#ffffff" onchange="changeColor('month')" class="w-8 h-8 border border-gray-300 rounded cursor-pointer">
                        <button onclick="resetColor('month')" class="text-xs text-gray-500 hover:text-gray-700">é‡ç½®</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="control-section">
            <h3 class="text-sm font-medium text-gray-700 mb-2">æ“ä½œ</h3>
            <div class="space-y-2">
                <button onclick="saveProgress()" class="btn btn-secondary w-full">ğŸ’¾ ä¿å­˜è¿›åº¦</button>
                <button onclick="clearAll()" class="btn btn-secondary w-full">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰</button>
                <button onclick="generateImage()" class="btn btn-success w-full">ğŸ“· ç”Ÿæˆå›¾ç‰‡</button>
            </div>
        </div>
    </div>

    <!-- éšè—çš„APIé…ç½®ï¼ˆéƒ¨ç½²æ—¶ä¿®æ”¹ï¼‰ -->
    <script>
        // éƒ¨ç½²æ—¶ä¿®æ”¹è¿™é‡Œçš„APIåœ°å€
        const API_BASE_URL = 'https://doubanbook.zeabur.app';
    </script>

    <!-- æ·»åŠ ä¹¦ç±å¼¹çª— -->
    <div id="addBookModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-xl font-semibold mb-4" id="modalTitle">æ·»åŠ ä¹¦ç±</h3>

            <!-- é€‰é¡¹å¡ -->
            <div class="flex border-b border-gray-200 mb-4">
                <button id="tabSearch" onclick="switchTab('search')" class="flex-1 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600">
                    ğŸ” æœç´¢
                </button>
                <button id="tabUpload" onclick="switchTab('upload')" class="flex-1 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700">
                    ğŸ“¤ æœ¬åœ°ä¸Šä¼ 
                </button>
            </div>

            <!-- æœç´¢é¢æ¿ -->
            <div id="searchPanel">
                <input type="text"
                    id="bookQuery"
                    placeholder="è¾“å…¥ä¹¦åæˆ–ISBN..."
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    onkeypress="handleBookInput(event)">
                <p class="text-sm text-gray-500 mb-4">æŒ‰å›è½¦æœç´¢</p>
            </div>

            <!-- æœ¬åœ°ä¸Šä¼ é¢æ¿ -->
            <div id="uploadPanel" class="hidden">
                <input type="text"
                    id="localBookTitle"
                    placeholder="è¾“å…¥ä¹¦åï¼ˆå¯é€‰ï¼‰..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <input type="file"
                    id="localBookCover"
                    accept="image/*"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    onchange="handleLocalUpload(event)">
                <p class="text-sm text-gray-500 mb-4">é€‰æ‹©å°é¢å›¾ç‰‡</p>
            </div>

            <div class="flex gap-2">
                <button onclick="closeModal()" class="btn btn-secondary flex-1">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        const state = {
            mainTitle: '',
            subTitle: '',
            months: {},
            apiUrl: 'https://your-api.railway.app',
            currentMonth: null,
            titleFont: "'Noto Sans SC', sans-serif",
            subFont: "'Noto Sans SC', sans-serif",
            monthFont: "'Long Cang', cursive",
            theme: 'theme-dark',
            customBg: null,  // è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡
            titleColor: null,  // ä¸»æ ‡é¢˜è‡ªå®šä¹‰é¢œè‰²
            subColor: null,    // å‰¯æ ‡é¢˜è‡ªå®šä¹‰é¢œè‰²
            monthColor: null   // æœˆä»½æ ‡ç­¾è‡ªå®šä¹‰é¢œè‰²
        };

        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            renderPreview();

            // åˆå§‹åŒ–æ¡Œé¢ç«¯æ§ä»¶
            document.getElementById('titleFont').value = state.titleFont;
            document.getElementById('subFont').value = state.subFont;
            document.getElementById('monthFont').value = state.monthFont || "'Long Cang', cursive";
            document.getElementById('themeSelect').value = state.theme || 'theme-dark';
            applyTheme(state.theme || 'theme-dark');
            updateMonthFont();

            // åˆå§‹åŒ–é¢œè‰²é€‰æ‹©å™¨ï¼ˆæ¡Œé¢ç«¯ï¼‰
            if (state.titleColor) document.getElementById('titleColor').value = state.titleColor;
            if (state.subColor) document.getElementById('subColor').value = state.subColor;
            if (state.monthColor) document.getElementById('monthColor').value = state.monthColor;

            // åˆå§‹åŒ–ç§»åŠ¨ç«¯æ§ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            const mobileTitleFont = document.getElementById('mobileTitleFont');
            const mobileSubFont = document.getElementById('mobileSubFont');
            const mobileMonthFont = document.getElementById('mobileMonthFont');
            const mobileTheme = document.getElementById('mobileThemeSelect');
            const mobileTitleColor = document.getElementById('mobileTitleColor');
            const mobileSubColor = document.getElementById('mobileSubColor');
            const mobileMonthColor = document.getElementById('mobileMonthColor');

            if (mobileTitleFont) {
                mobileTitleFont.value = state.titleFont;
                mobileTitleFont.addEventListener('change', () => changeFont('title'));
            }
            if (mobileSubFont) {
                mobileSubFont.value = state.subFont;
                mobileSubFont.addEventListener('change', () => changeFont('sub'));
            }
            if (mobileMonthFont) {
                mobileMonthFont.value = state.monthFont || "'Long Cang', cursive";
                mobileMonthFont.addEventListener('change', () => changeFont('month'));
            }
            if (mobileTheme) {
                mobileTheme.value = state.theme || 'theme-dark';
                mobileTheme.addEventListener('change', () => changeTheme());
            }
            if (mobileTitleColor) {
                if (state.titleColor) mobileTitleColor.value = state.titleColor;
                mobileTitleColor.addEventListener('change', () => changeColor('title'));
            }
            if (mobileSubColor) {
                if (state.subColor) mobileSubColor.value = state.subColor;
                mobileSubColor.addEventListener('change', () => changeColor('sub'));
            }
            if (mobileMonthColor) {
                if (state.monthColor) mobileMonthColor.value = state.monthColor;
                mobileMonthColor.addEventListener('change', () => changeColor('month'));
            }

            // åº”ç”¨é¢œè‰²
            applyDefaultTitleColor();
            applyDefaultSubColor();
            applyDefaultMonthColor();
        });

        // åˆ‡æ¢ä¸»é¢˜
        function changeTheme() {
            // ä»æ¡Œé¢æˆ–ç§»åŠ¨ç«¯æ§ä»¶è·å–ä¸»é¢˜å€¼
            const desktopTheme = document.getElementById('themeSelect');
            const mobileTheme = document.getElementById('mobileThemeSelect');

            console.log('changeTheme called');
            console.log('desktopTheme:', desktopTheme);
            console.log('mobileTheme:', mobileTheme);

            // å®‰å…¨è·å–ä¸»é¢˜å€¼
            let theme = 'theme-dark'; // é»˜è®¤å€¼
            if (desktopTheme && desktopTheme.value) {
                theme = desktopTheme.value;
            } else if (mobileTheme && mobileTheme.value) {
                theme = mobileTheme.value;
            }

            console.log('selected theme:', theme);

            state.theme = theme;
            applyTheme(theme);

            // åŒæ­¥ä¸¤ä¸ªæ§ä»¶
            if (desktopTheme) desktopTheme.value = theme;
            if (mobileTheme) mobileTheme.value = theme;

            // å¦‚æœæ˜¯è‡ªå®šä¹‰ä¸»é¢˜ï¼Œæ˜¾ç¤ºä¸Šä¼ æŒ‰é’®
            const uploadBtn = document.getElementById('uploadBgBtn');
            const mobileUploadBtn = document.getElementById('mobileUploadBgBtn');
            if (theme === 'theme-custom') {
                if (uploadBtn) uploadBtn.classList.remove('hidden');
                if (mobileUploadBtn) mobileUploadBtn.classList.remove('hidden');
            } else {
                if (uploadBtn) uploadBtn.classList.add('hidden');
                if (mobileUploadBtn) mobileUploadBtn.classList.add('hidden');
            }

            // åˆ‡æ¢ä¸»é¢˜æ—¶é‡æ–°åº”ç”¨é¢œè‰²
            applyDefaultTitleColor();
            applyDefaultSubColor();
            applyDefaultMonthColor();

            saveProgress();
        }

        // åº”ç”¨ä¸»é¢˜
        function applyTheme(theme) {
            const container = document.getElementById('preview-container');
            // ç§»é™¤æ‰€æœ‰ä¸»é¢˜ç±»
            container.classList.remove(
                'theme-dark', 'theme-warm', 'theme-cool', 'theme-forest',
                'theme-sunset', 'theme-minimal', 'theme-vintage', 'theme-ocean', 'theme-custom'
            );
            // æ·»åŠ æ–°ä¸»é¢˜ç±»
            container.classList.add(theme);

            // å¦‚æœæœ‰è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡ï¼Œåº”ç”¨å®ƒ
            if (theme === 'theme-custom' && state.customBg) {
                container.style.backgroundImage = `url(${state.customBg})`;
            } else if (theme !== 'theme-custom') {
                container.style.backgroundImage = '';
            }
        }

        // å¤„ç†è‡ªå®šä¹‰èƒŒæ™¯ä¸Šä¼ 
        function handleCustomBg(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                state.customBg = e.target.result;
                applyTheme('theme-custom');
                saveProgress();
                showToast('èƒŒæ™¯å›¾ç‰‡å·²ä¸Šä¼ ', 'success');
            };
            reader.readAsDataURL(file);
        }

        // åˆ‡æ¢å­—ä½“
        function changeFont(type) {
            let fontValue;

            if (type === 'title') {
                const desktopFont = document.getElementById('titleFont');
                const mobileFont = document.getElementById('mobileTitleFont');

                // å®‰å…¨è·å–å­—ä½“å€¼
                if (desktopFont && desktopFont.value) {
                    fontValue = desktopFont.value;
                } else if (mobileFont && mobileFont.value) {
                    fontValue = mobileFont.value;
                } else {
                    fontValue = "'Noto Sans SC', sans-serif";
                }

                state.titleFont = fontValue;
                document.getElementById('mainTitle').style.fontFamily = state.titleFont;

                // åŒæ­¥æ§ä»¶
                if (desktopFont) desktopFont.value = fontValue;
                if (mobileFont) mobileFont.value = fontValue;
            } else if (type === 'sub') {
                const desktopFont = document.getElementById('subFont');
                const mobileFont = document.getElementById('mobileSubFont');

                // å®‰å…¨è·å–å­—ä½“å€¼
                if (desktopFont && desktopFont.value) {
                    fontValue = desktopFont.value;
                } else if (mobileFont && mobileFont.value) {
                    fontValue = mobileFont.value;
                } else {
                    fontValue = "'Noto Sans SC', sans-serif";
                }

                state.subFont = fontValue;
                document.getElementById('subTitle').style.fontFamily = state.subFont;

                if (desktopFont) desktopFont.value = fontValue;
                if (mobileFont) mobileFont.value = fontValue;
            } else if (type === 'month') {
                const desktopFont = document.getElementById('monthFont');
                const mobileFont = document.getElementById('mobileMonthFont');

                // å®‰å…¨è·å–å­—ä½“å€¼
                if (desktopFont && desktopFont.value) {
                    fontValue = desktopFont.value;
                } else if (mobileFont && mobileFont.value) {
                    fontValue = mobileFont.value;
                } else {
                    fontValue = "'Long Cang', cursive";
                }

                state.monthFont = fontValue;
                updateMonthFont();

                if (desktopFont) desktopFont.value = fontValue;
                if (mobileFont) mobileFont.value = fontValue;
            }
            saveProgress();
        }

        // åˆ‡æ¢é¢œè‰²
        function changeColor(type) {
            let colorValue;

            if (type === 'title') {
                // ä»æ¡Œé¢æˆ–ç§»åŠ¨ç«¯æ§ä»¶è·å–å€¼
                const desktopColor = document.getElementById('titleColor');
                const mobileColor = document.getElementById('mobileTitleColor');

                // å®‰å…¨è·å–é¢œè‰²å€¼
                if (desktopColor && desktopColor.value) {
                    colorValue = desktopColor.value;
                } else if (mobileColor && mobileColor.value) {
                    colorValue = mobileColor.value;
                } else {
                    colorValue = '#ffffff';
                }

                state.titleColor = colorValue;
                document.getElementById('mainTitle').style.color = state.titleColor;
                document.getElementById('mainTitle').style.setProperty('color', state.titleColor, 'important');

                // åŒæ­¥ä¸¤ä¸ªæ§ä»¶
                if (desktopColor) desktopColor.value = colorValue;
                if (mobileColor) mobileColor.value = colorValue;
            } else if (type === 'sub') {
                const desktopColor = document.getElementById('subColor');
                const mobileColor = document.getElementById('mobileSubColor');

                // å®‰å…¨è·å–é¢œè‰²å€¼
                if (desktopColor && desktopColor.value) {
                    colorValue = desktopColor.value;
                } else if (mobileColor && mobileColor.value) {
                    colorValue = mobileColor.value;
                } else {
                    colorValue = '#ffffff';
                }

                state.subColor = colorValue;
                document.getElementById('subTitle').style.color = state.subColor;
                document.getElementById('subTitle').style.setProperty('color', state.subColor, 'important');

                if (desktopColor) desktopColor.value = colorValue;
                if (mobileColor) mobileColor.value = colorValue;
            } else if (type === 'month') {
                const desktopColor = document.getElementById('monthColor');
                const mobileColor = document.getElementById('mobileMonthColor');

                // å®‰å…¨è·å–é¢œè‰²å€¼
                if (desktopColor && desktopColor.value) {
                    colorValue = desktopColor.value;
                } else if (mobileColor && mobileColor.value) {
                    colorValue = mobileColor.value;
                } else {
                    colorValue = '#ffffff';
                }

                state.monthColor = colorValue;
                updateMonthColor();

                if (desktopColor) desktopColor.value = colorValue;
                if (mobileColor) mobileColor.value = colorValue;
            }
            saveProgress();
        }

        // é‡ç½®é¢œè‰²
        function resetColor(type) {
            if (type === 'title') {
                state.titleColor = null;
                const desktopColor = document.getElementById('titleColor');
                const mobileColor = document.getElementById('mobileTitleColor');
                if (desktopColor) desktopColor.value = '#ffffff';
                if (mobileColor) mobileColor.value = '#ffffff';
                document.getElementById('mainTitle').style.removeProperty('color');
                applyDefaultTitleColor();
            } else if (type === 'sub') {
                state.subColor = null;
                const desktopColor = document.getElementById('subColor');
                const mobileColor = document.getElementById('mobileSubColor');
                if (desktopColor) desktopColor.value = '#ffffff';
                if (mobileColor) mobileColor.value = '#ffffff';
                document.getElementById('subTitle').style.removeProperty('color');
                applyDefaultSubColor();
            } else if (type === 'month') {
                state.monthColor = null;
                const desktopColor = document.getElementById('monthColor');
                const mobileColor = document.getElementById('mobileMonthColor');
                if (desktopColor) desktopColor.value = '#ffffff';
                if (mobileColor) mobileColor.value = '#ffffff';
                applyDefaultMonthColor();
            }
            saveProgress();
            showToast('é¢œè‰²å·²é‡ç½®', 'info');
        }

        // åº”ç”¨é»˜è®¤æ ‡é¢˜é¢œè‰²ï¼ˆæ ¹æ®ä¸»é¢˜ï¼‰
        function applyDefaultTitleColor() {
            const container = document.getElementById('preview-container');
            const isDarkTheme = container.classList.contains('theme-dark') ||
                               container.classList.contains('theme-forest') ||
                               container.classList.contains('theme-sunset') ||
                               container.classList.contains('theme-ocean') ||
                               container.classList.contains('theme-custom');

            if (state.titleColor) {
                document.getElementById('mainTitle').style.setProperty('color', state.titleColor, 'important');
            } else {
                document.getElementById('mainTitle').style.removeProperty('color');
            }
        }

        // åº”ç”¨é»˜è®¤å‰¯æ ‡é¢˜é¢œè‰²ï¼ˆæ ¹æ®ä¸»é¢˜ï¼‰
        function applyDefaultSubColor() {
            const container = document.getElementById('preview-container');
            const isDarkTheme = container.classList.contains('theme-dark') ||
                               container.classList.contains('theme-forest') ||
                               container.classList.contains('theme-sunset') ||
                               container.classList.contains('theme-ocean') ||
                               container.classList.contains('theme-custom');

            if (state.subColor) {
                document.getElementById('subTitle').style.setProperty('color', state.subColor, 'important');
            } else {
                document.getElementById('subTitle').style.removeProperty('color');
            }
        }

        // åº”ç”¨é»˜è®¤æœˆä»½é¢œè‰²ï¼ˆæ ¹æ®ä¸»é¢˜ï¼‰
        function applyDefaultMonthColor() {
            const container = document.getElementById('preview-container');
            const isDarkTheme = container.classList.contains('theme-dark') ||
                               container.classList.contains('theme-forest') ||
                               container.classList.contains('theme-sunset') ||
                               container.classList.contains('theme-ocean') ||
                               container.classList.contains('theme-custom');

            const monthLabels = document.querySelectorAll('.month-label');
            monthLabels.forEach(label => {
                if (state.monthColor) {
                    label.style.color = state.monthColor;
                } else {
                    label.style.color = isDarkTheme ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.75)';
                }
            });
        }

        // æ›´æ–°æœˆä»½é¢œè‰²
        function updateMonthColor() {
            applyDefaultMonthColor();
        }

        // æ›´æ–°æœˆä»½å­—ä½“
        function updateMonthFont() {
            const monthLabels = document.querySelectorAll('.month-label');
            monthLabels.forEach(label => {
                label.style.fontFamily = state.monthFont;
            });
        }

        // æ¸²æŸ“é¢„è§ˆ
        function renderPreview() {
            document.getElementById('mainTitle').value = state.mainTitle;
            document.getElementById('mainTitle').style.fontFamily = state.titleFont;
            document.getElementById('subTitle').value = state.subTitle;
            document.getElementById('subTitle').style.fontFamily = state.subFont;

            const container = document.getElementById('previewBooks');

            // è®¡ç®—æœˆä»½æ ‡ç­¾é¢œè‰²
            const previewContainer = document.getElementById('preview-container');
            const isDarkTheme = previewContainer.classList.contains('theme-dark') ||
                               previewContainer.classList.contains('theme-forest') ||
                               previewContainer.classList.contains('theme-sunset') ||
                               previewContainer.classList.contains('theme-ocean') ||
                               previewContainer.classList.contains('theme-custom');
            const defaultMonthColor = isDarkTheme ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.75)';
            const monthColorStyle = state.monthColor ? `color: ${state.monthColor}` : `color: ${defaultMonthColor}`;

            container.innerHTML = months.map(month => {
                const books = state.months[month] || [];
                const canAddMore = books.length < 12;

                return `
                    <div class="month-row">
                        <div class="month-label" style="font-family: ${state.monthFont}; ${monthColorStyle}">${month}</div>
                        <div class="books-container">
                            ${books.map((book, index) => `
                                <div class="added-book">
                                    <img src="${book.cover}" alt="${book.title}" title="${book.title}">
                                    <div class="remove-icon" onclick="removeBook('${month}', ${index})">Ã—</div>
                                </div>
                            `).join('')}
                            ${canAddMore ? `
                                <div class="add-book-slot" onclick="openAddModal('${month}')">
                                    <span class="plus-icon">+</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ‰“å¼€æ·»åŠ ä¹¦ç±å¼¹çª—
        function openAddModal(month) {
            state.currentMonth = month;
            document.getElementById('modalTitle').textContent = `æ·»åŠ ä¹¦ç± - ${month}`;
            document.getElementById('bookQuery').value = '';
            document.getElementById('localBookTitle').value = '';
            document.getElementById('localBookCover').value = '';
            document.getElementById('addBookModal').classList.add('active');
            document.getElementById('bookQuery').focus();

            // é‡ç½®åˆ°æœç´¢æ ‡ç­¾
            switchTab('search');
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('addBookModal').classList.remove('active');
            state.currentMonth = null;
        }

        // åˆ‡æ¢é€‰é¡¹å¡
        function switchTab(tab) {
            const searchPanel = document.getElementById('searchPanel');
            const uploadPanel = document.getElementById('uploadPanel');
            const tabSearch = document.getElementById('tabSearch');
            const tabUpload = document.getElementById('tabUpload');

            if (tab === 'search') {
                searchPanel.classList.remove('hidden');
                uploadPanel.classList.add('hidden');
                tabSearch.classList.add('text-blue-600', 'border-blue-600');
                tabSearch.classList.remove('text-gray-500', 'border-transparent');
                tabUpload.classList.remove('text-blue-600', 'border-blue-600');
                tabUpload.classList.add('text-gray-500', 'border-transparent');
            } else {
                searchPanel.classList.add('hidden');
                uploadPanel.classList.remove('hidden');
                tabUpload.classList.add('text-blue-600', 'border-blue-600');
                tabUpload.classList.remove('text-gray-500', 'border-transparent');
                tabSearch.classList.remove('text-blue-600', 'border-blue-600');
                tabSearch.classList.add('text-gray-500', 'border-transparent');
            }
        }

        // å¤„ç†æœ¬åœ°ä¸Šä¼ 
        function handleLocalUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const month = state.currentMonth;
            if (!month) return;

            const title = document.getElementById('localBookTitle').value.trim() || 'æœ¬åœ°ä¹¦ç±';

            // æ˜¾ç¤ºåŠ è½½ä¸­
            const books = state.months[month] || [];
            state.months[month] = [...books, { loading: true }];
            renderPreview();

            const reader = new FileReader();
            reader.onload = (e) => {
                // æ·»åŠ ä¹¦ç±
                state.months[month] = [...books, {
                    title: title,
                    author: 'æœ¬åœ°ä¸Šä¼ ',
                    cover: e.target.result,
                    isbn: ''
                }];

                renderPreview();
                saveProgress();
                showToast(`å·²æ·»åŠ ï¼šã€Š${title}ã€‹`, 'success');
                closeModal();

                // æ¸…ç©ºè¾“å…¥
                document.getElementById('localBookTitle').value = '';
                document.getElementById('localBookCover').value = '';
            };
            reader.readAsDataURL(file);
        }

        // å¤„ç†ä¹¦ç±è¾“å…¥
        async function handleBookInput(event) {
            if (event.key === 'Enter') {
                const query = event.target.value.trim();
                if (!query) return;

                await addBook(query);
                closeModal();
            }
        }

        // æ·»åŠ ä¹¦ç±
        async function addBook(query) {
            const month = state.currentMonth;

            if (!month) return;

            // æ˜¾ç¤ºåŠ è½½ä¸­
            const books = state.months[month] || [];
            state.months[month] = [...books, { loading: true }];
            renderPreview();

            showToast('æ­£åœ¨æœç´¢ä¹¦ç±...', 'info');

            try {
                const response = await fetch(`${API_BASE_URL}/api/search`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query })
                });

                if (!response.ok) throw new Error('æœç´¢å¤±è´¥');

                const data = await response.json();

                if (!data.cover_url) {
                    showToast('æœªæ‰¾åˆ°ä¹¦ç±å°é¢', 'error');
                    // ç§»é™¤åŠ è½½ä¸­
                    state.months[month] = books;
                    renderPreview();
                    return;
                }

                // æ·»åŠ ä¹¦ç±
                state.months[month] = [...books, {
                    title: data.title,
                    author: data.author,
                    cover: data.cover_url,
                    isbn: data.isbn
                }];

                renderPreview();
                saveProgress();
                showToast(`å·²æ·»åŠ ï¼šã€Š${data.title}ã€‹`, 'success');

            } catch (error) {
                console.error(error);
                showToast('æœç´¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
                // ç§»é™¤åŠ è½½ä¸­
                state.months[month] = books;
                renderPreview();
            }
        }

        // åˆ é™¤ä¹¦ç±
        function removeBook(month, index) {
            state.months[month].splice(index, 1);
            renderPreview();
            saveProgress();
        }

        // æ›´æ–°æ ‡é¢˜
        function updateTitle() {
            state.mainTitle = document.getElementById('mainTitle').value;
            saveProgress();
        }

        function updateSubtitle() {
            state.subTitle = document.getElementById('subTitle').value;
            saveProgress();
        }

        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            localStorage.setItem('bookTrackerState', JSON.stringify(state));
        }

        // åŠ è½½è¿›åº¦
        function loadProgress() {
            const saved = localStorage.getItem('bookTrackerState');
            if (saved) {
                const loaded = JSON.parse(saved);
                Object.assign(state, loaded);
            }
        }

        // æ¸…ç©ºæ‰€æœ‰
        function clearAll() {
            if (!confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿ')) return;

            state.mainTitle = '';
            state.subTitle = '';
            state.months = {};

            renderPreview();
            saveProgress();
            showToast('å·²æ¸…ç©ºæ‰€æœ‰æ•°æ®', 'info');
        }

        // ç”Ÿæˆå›¾ç‰‡
        async function generateImage() {
            const container = document.getElementById('preview-container');

            // ä¸´æ—¶éšè—æ‰€æœ‰æ·»åŠ æŒ‰é’®
            const addButtons = container.querySelectorAll('.add-book-slot');
            addButtons.forEach(btn => btn.style.display = 'none');

            showToast('æ­£åœ¨ç”Ÿæˆå›¾ç‰‡...', 'info');

            try {
                const canvas = await html2canvas(container, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#f5f7fa'
                });

                const link = document.createElement('a');
                link.download = `è¯»ä¹¦è®°å½•_${new Date().getTime()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();

                showToast('å›¾ç‰‡ç”ŸæˆæˆåŠŸï¼', 'success');

            } catch (error) {
                console.error(error);
                showToast('å›¾ç‰‡ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            } finally {
                // æ¢å¤æ˜¾ç¤ºæ·»åŠ æŒ‰é’®
                addButtons.forEach(btn => btn.style.display = 'flex');
            }
        }

        // Toasté€šçŸ¥
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('addBookModal').addEventListener('click', (e) => {
            if (e.target.id === 'addBookModal') {
                closeModal();
            }
        });

        // ==================== ç§»åŠ¨ç«¯æ§åˆ¶å‡½æ•° ====================

        // åˆ‡æ¢ç§»åŠ¨ç«¯æ§åˆ¶é¢æ¿
        function toggleMobileDrawer() {
            const drawer = document.getElementById('mobileDrawer');
            const toggle = drawer.querySelector('.mobile-drawer-toggle');

            drawer.classList.toggle('collapsed');

            // åˆ‡æ¢å›¾æ ‡
            if (drawer.classList.contains('collapsed')) {
                toggle.textContent = 'âš™ï¸';
            } else {
                toggle.textContent = 'âœ•';
            }
        }

        // åˆå§‹åŒ–æ§åˆ¶é¢æ¿å›¾æ ‡
        document.addEventListener('DOMContentLoaded', () => {
            const drawer = document.getElementById('mobileDrawer');
            const toggle = drawer.querySelector('.mobile-drawer-toggle');
            if (drawer.classList.contains('collapsed')) {
                toggle.textContent = 'âš™ï¸';
            } else {
                toggle.textContent = 'âœ•';
            }
        });

        // åˆ‡æ¢ç§»åŠ¨ç«¯å¸®åŠ©å¼¹çª—
        function toggleMobileHelp() {
            const modal = document.getElementById('mobileHelpModal');
            modal.classList.toggle('active');
        }

        // ç‚¹å‡»ç§»åŠ¨ç«¯å¸®åŠ©å¼¹çª—å¤–éƒ¨å…³é—­
        function closeMobileHelpOutside(event) {
            if (event.target.id === 'mobileHelpModal') {
                toggleMobileHelp();
            }
        }
    </script>
</body>
</html>
